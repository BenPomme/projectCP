<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Storage CORS Configuration Instructions</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1, h2, h3 {
            color: #333;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, monospace;
        }
        pre {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .note {
            background-color: #fffde7;
            padding: 10px;
            border-left: 4px solid #ffeb3b;
            margin: 15px 0;
        }
        .important {
            background-color: #ffebee;
            padding: 10px;
            border-left: 4px solid #f44336;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>Firebase Storage CORS Configuration Instructions</h1>
    <p>Follow these steps to configure CORS settings for your Firebase Storage bucket: <code>kingcp-a0065.appspot.com</code> (also appears as <code>kingcp-a0065.firebasestorage.app</code>)</p>

    <h2>Method 1: Using Google Cloud Console</h2>
    <ol>
        <li>Go to the <a href="https://console.cloud.google.com/storage/browser" target="_blank">Google Cloud Console Storage Browser</a></li>
        <li>Select your bucket: <code>kingcp-a0065.appspot.com</code> or <code>kingcp-a0065.firebasestorage.app</code></li>
        <li>Click on the "Permissions" tab at the top</li>
        <li>Scroll down to the bottom and locate the "CORS configuration" section</li>
        <li>Click "Edit configuration"</li>
        <li>Add the following JSON configuration:
            <pre>[
  {
    "origin": ["https://benpomme.github.io"],
    "method": ["GET", "POST", "PUT", "DELETE", "HEAD"],
    "maxAgeSeconds": 3600,
    "responseHeader": ["Content-Type", "Content-Disposition", "Content-Length"]
  }
]</pre>
        </li>
        <li>Click "Save" to apply the changes</li>
    </ol>

    <div class="note">
        <strong>Note:</strong> CORS changes may take 5-10 minutes to propagate through Google's infrastructure. After configuring CORS, wait a few minutes before testing your application.
    </div>

    <div class="important">
        <strong>Important:</strong> Make sure you have the Firebase Blaze (pay-as-you-go) plan enabled. CORS configuration is not available on the free Spark plan.
    </div>

    <h2>Verifying Your CORS Configuration</h2>
    <p>After setting up CORS, you can test it by:</p>
    <ol>
        <li>Going to your application at <a href="https://benpomme.github.io/projectCP/" target="_blank">https://benpomme.github.io/projectCP/</a></li>
        <li>Attempting to upload a file</li>
        <li>Checking the browser console (F12) to ensure there are no CORS errors</li>
    </ol>

    <h2>Updating Your Code</h2>
    <p>Make sure your Firebase configuration in <code>frontend/src/config/firebase.ts</code> uses the correct bucket name:</p>
    <pre>storageBucket: "kingcp-a0065.appspot.com"</pre>
    <p>This should match what's in your <code>.env</code> file:</p>
    <pre>VITE_FIREBASE_STORAGE_BUCKET=kingcp-a0065.appspot.com</pre>
</body>
</html> 